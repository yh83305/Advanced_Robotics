<mujoco model="3R_robot">
    <compiler angle="degree"/>
    <asset>
        <texture name="grid" type="2d" builtin="checker" rgb1=".1 .2 .3"
        rgb2=".2 .3 .4" width="300" height="300" mark="none"/>
        <material name="grid" texture="grid" texrepeat="6 6" texuniform="true" reflectance=".2"/>
    </asset>
    <default>
        <joint type="hinge" axis="0 0 1" limited="true"/>
        <geom type="cylinder" size=".025 .1" />
    </default>

    <option gravity="0 0 0"/>

    <worldbody>
        <light diffuse=".5 .5 .5" pos="0 0 3" dir="0 0 -1"/>
        <geom type="plane" size="1 1 0.1" material="grid"/>

        <site name="begin_effector" pos="0 0 0.4" size="0.02"/>
        <!-- Base of the Robot -->
        <body name="BaseLink" pos="0 0 0.2" euler="0 0 -90">
            <geom type="cylinder" pos="0 0 0" size=".025 .2"/>

            <!-- Link 1 and Joint 1 -->
            <body name="link1" pos="0 0.1 0.2" euler="-90 0 0">
                <joint name="joint1" pos="0 0 -0.1" range="-inf inf" axis="0 -1 0" damping="1"/>
                <geom pos="0 0 0" rgba=".6 .2 .2 1"/>

                <!-- Link 2 and Joint 2 -->
                <body name="link2" pos="0 0.1 0.1" euler="-90 0 0">
                    <joint name="joint2" pos="0 0 -0.1" range="-inf inf" axis="1 0 0" damping="1"/>
                    <geom pos="0 0 0" rgba=".2 .6 1 1"/>

                    <!-- Link 3 and Joint 3 (New) -->
                    <body name="link3" pos="0 -0.1 0.1" euler="90 0 90">
                        <joint name="joint3" pos="0 0 -0.1" range="-inf inf" axis="0 0 1" damping="1"/>
                        <geom pos="0 0 0" rgba=".2 .2 .6 1"/>

                        <!-- End Effector -->
                        <site name="end_effector" pos="0 0 -0.1" size="0.02"/>

                    </body>
                </body>
            </body>
        </body>
    </worldbody>

    <!-- Actuators for controlling the joints -->
    <actuator>
        <!-- Motor control for joint1 (torque control) -->

        <!--
        <motor name="joint1_motor" joint="joint1" ctrlrange="-10 10" gear="1"/>
        <motor name="joint2_motor" joint="joint2" ctrlrange="-10 10" gear="1"/>
        <motor name="joint3_motor" joint="joint3" ctrlrange="-10 10" gear="1"/>
        -->

        <position name="joint1_position_control" joint="joint1" kp="10" kv="0.02" ctrlrange="-3.14 3.14"/>
        <position name="joint2_position_control" joint="joint2" kp="10" kv="0.02" ctrlrange="-3.14 3.14"/>
        <position name="joint3_position_control" joint="joint3" kp="10" kv="0.02" ctrlrange="-3.14 3.14"/>

    </actuator>

    <!-- Sensors for monitoring joint positions and torques -->
    <sensor>
        <jointpos name="joint1_position_sensor" joint="joint1"/> <!-- Position sensor for joint1 -->
        <jointpos name="joint2_position_sensor" joint="joint2"/> <!-- Position sensor for joint2 -->
        <jointpos name="joint3_position_sensor" joint="joint3"/> <!-- Position sensor for joint3 -->
    </sensor>
    <keyframe>
        <!-- Initial configuration for three joints -->
        <key name="initial_pose" qpos="0 0 0"/>
        <!-- Bent configuration for three joints -->
        <key name="bent_pose" qpos="0 0 0"/>
    </keyframe>

</mujoco>